<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>NodeJS Chat Demo </title>
<meta name="Keywords" content="">
<meta name="Description" content="">
<link href="lib/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css" />
<script src="lib/jquery/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="lib/ligerUI/js/ligerui.min.js" type="text/javascript"></script>
<script type="text/javascript">
/*
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,h,c){var a=$([]),e=$.resize=$.extend($.resize,{}),i,k="setTimeout",j="resize",d=j+"-special-event",b="delay",f="throttleWindow";e[b]=10;e[f]=true;$.event.special[j]={setup:function(){if(!e[f]&&this[k]){return false}var l=$(this);a=a.add(l);$.data(this,d,{w:l.width(),h:l.height()});if(a.length===1){g()}},teardown:function(){if(!e[f]&&this[k]){return false}var l=$(this);a=a.not(l);l.removeData(d);if(!a.length){clearTimeout(i)}},add:function(l){if(!e[f]&&this[k]){return false}var n;function m(s,o,p){var q=$(this),r=$.data(this,d);r.w=o!==c?o:q.width();r.h=p!==c?p:q.height();n.apply(this,arguments)}if($.isFunction(l)){n=l;return m}else{n=l.handler;l.handler=m}}};function g(){i=h[k](function(){a.each(function(){var n=$(this),m=n.width(),l=n.height(),o=$.data(this,d);if(m!==o.w||l!==o.h){n.trigger(j,[o.w=m,o.h=l])}});g()},e[b])}})(jQuery,this);

$(function (){
    $("#layout1").ligerLayout({ leftWidth: 190, height: '100%', heightDiff:-34, space:4, onHeightChanged: f_heightChanged });

	var height = $(".l-layout-center").height();

	$("#framecenter").ligerTab({ height: height });

	var signin = function(){
		var user_name = $("#user-name").val();
		var user_sex = $("#user-set input:radio:checked").val();
		if (user_name && user_sex) {
			user_set_dialog.close();
			var msg_layout = $("#layout_msg").show().ligerLayout({ bottomHeight: 150 });
			msgInput_heightChanged();
		} else {
			$("#user-name").ligerTip({ content: '请填写你的姓名或者昵称.', width: 100 });
		}
	}

	$("#user-name").ligerTextBox().bind('focus', function(){$("#user-name").ligerHideTip();});
	$("#user-set input:radio").ligerRadio();
	$("#user-signin").ligerButton({click: signin, text: '进入我的主页'});

	var user_set_dialog = $.ligerDialog.open({ target: $("#user-set"), title: '个人资料', allowClose: false });
	$("body").bind('keydown', function(e){
		if (e.which == 13) {signin();};
	})
});

function f_heightChanged(options){
    if (tab){
    	tab.addHeight(options.diff);
    }
    if (accordion && options.middleHeight - 24 > 0){
    	accordion.setHeight(options.middleHeight - 24);
    }
}

function f_addTab(tabid, text, url){
	tab.addTabItem({ tabid: tabid, text: text, url: url });
}

function msgInput_heightChanged(){
	var parentDom = $("#layout_msg").find(".l-layout-bottom");
	var autoH = function(){
		$("#msg_input").height(parentDom.height()).focus();
	}
	autoH();
	parentDom.resize(autoH);
}
</script>
<style type="text/css"> 
    body,html{height:100%;}
    body{ padding:0px; margin:0; overflow:hidden;}
    .space{ color:#E7E7E7;}
    .l-topmenu{ margin:0; padding:0; height:31px; line-height:31px; background:url('lib/images/top.jpg') repeat-x bottom; position:relative; border-top:1px solid #1D438B;}
    .l-topmenu-logo{ color:#E7E7E7; padding-left:35px; line-height:26px;background:url('lib/images/topicon.gif') no-repeat 10px 5px;}
    .l-topmenu-welcome{ position:absolute; height:24px; line-height:24px; right:30px; top:2px;color:#070A0C;}
    .l-topmenu-welcome a{ color:#E7E7E7; text-decoration:underline}

    #user-set{display: none; margin: 10px 5px;}
    #user-set th{text-align:right; padding:5px;}

    #layout_msg{display: none;}
    #msg_input{border: none; width: 99.5%; margin: 2px 3px;}
 </style>
</head>

<body style="padding:0px;background:#EAEEF5;">
	<div id="pageloading"></div>
	<div id="user-set">
		<table>
			<tr>
				<th>姓名/昵称</th>
				<td><input type="text" id="user-name" value="" /></td>
			</tr>
			<tr>
				<th>性别</th>
				<td>
					<input type="radio" value="1" name="user-name" checked="checked" />男
					<input type="radio" value="0" name="user-name" />女
				</td>
			</tr>
			<tr>
				<th></th>
				<td height="35">
					<div id="user-signin"></div>
				</td>
			</tr>
		</table>
	</div>
	<div id="topmenu" class="l-topmenu">
	    <div class="l-topmenu-logo">NodeJS Chat Demo </div>
	    <div class="l-topmenu-welcome">
	        <a href="javascript:;" class="l-link2">服务器版本</a>
	        <span class="space">|</span>
	        <a href="javascript:;" class="l-link2" target="_blank">捐赠</a>
	        <span class="space">|</span>
	         <a href="javascript:;" class="l-link2" target="_blank">论坛</a>
	    </div>
	</div>

	<div id="layout1" style="width:99.2%; margin:0 auto; margin-top:4px; ">
		<div position="center" id="framecenter">
            <div tabid="home" title="我的主页">
                <div id="layout_msg">
                	<div position="center"></div>
                	<div position="bottom">
                		<textarea id="msg_input" class="l-textarea"></textarea>
                	</div>
                </div>
            </div>
		</div>
		<div position="right" title="用户列表"></div>
	</div>

    <div style="height:32px; line-height:32px; text-align:center;">
            Copyright © 2012 MISLOG.COM
    </div>
<div style="display:none"></div>
</body>
</html>
